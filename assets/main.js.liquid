{% comment %}

{% endcomment %}

$(function () {
// $(window).load(function () {
	var hbsApp = window.hbsApp;
	console.log('\n\n**** START javascript main.js ********\n\n');

	// universal properties to access
	hbsApp.docWidth = $(document).width();
	hbsApp.windowWidth = $(window).width();
	hbsApp.header = $('.hbs_headers');
	hbsApp.container = hbsApp.getContainerDOM(); // returns element, stripped away of $() wrap
	hbsApp.containerType = hbsApp.getContainerType(hbsApp.container);
	hbsApp.mobileCheck = hbsApp.getMobileCheck();
	hbsApp.imagesLoading = false;
	hbsApp.page_title = false;

	// initialize app
	hbsApp.catalogInitCol(hbsApp.catalogColWidth());
  hbsApp.checkImgLoading("", function () {
  	hbsApp.fpAdjustCol();
  	hbsApp.catalogAdjustProductHeight("", hbsApp);
  	console.log('executed?');
  }, [], hbsApp);
  hbsApp.controlPanelInit(hbsApp);

  // page specific initiaion
  if (hbsApp.page === 'about-us') {
  	hbsApp.sortProfiles(hbsApp);
  }

	// auto update properties upon window.resize
	$(window).resize((function () {
		var timeoutPointer;
		return function () {
			clearTimeout(timeoutPointer);
			timeoutPointer = setTimeout(function () {
				console.log("\n");
				var oldWidth = hbsApp.docWidth;
				hbsApp.docWidth = $(document).width()
				var diff = hbsApp.docWidth - oldWidth;
				console.log('Window resized, new width:', hbsApp.docWidth, ', old: ', oldWidth, ', diff px:', diff, ', diff %:', (diff/oldWidth*100).toFixed(4));

				var oldMobileCheck = hbsApp.mobileCheck;
				hbsApp.mobileCheck = hbsApp.getMobileCheck();
				console.log('Window resized, new grid: ', hbsApp.mobileCheck, ', old: ', oldMobileCheck);

				// for front page
				hbsApp.fpAdjustCol();

				// for catalog.all page
		  	hbsApp.catalogAdjustProductHeight(hbsApp.imageObj, hbsApp);

			}, 100);
		}
	})()); // end of resizing update functions
	
	console.log('\n\n**** /END javascript main.js ********\n\n');
});
